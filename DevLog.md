## 12/10/2024

In the main.js the logic can now find properties of a control module class
The properties to look for are hard coded. But for now, it meets the requirement
of extracting information from each FHX object.

Similar exercise can be done from EMC, possibly with another set of hardcoded
property names

More work needs to be done to make these logic reusable across more objects

=> Since the code is able to extract information, the next step is to create tables
in the format of .md .txt .html or any other ideal method of displaying the data
for consumption for the DS creation

## 12/10/2024

#### Tasks:

-Find the rest of the info for DS

## 12/11/2024

Finished a new version of isolateBlock(fhxstring, blockType)
This function can isolate blocks using depth counting
This has the potential of being reused to find the inner blocks for further processings

## 12/12/2024

The code is now able to isolate and extract a given type of blocks (for instance FUNCTION*BLOCK), using \_isolateBlock(fhxstring, blockType)*. This function also works well with inner blocks. In order to properly extract the inner blocks, the input fhx block string has to contain a single fhx block string. Otherwise inner blocks (for instance ATTRIBUTE_INSTANCE) of multiple DeltaV class objects would be returned in a single array.

When extracting inner blocks, the string will retain there original indentation, as they are extracted with String.prototype.substring which includes leading spaces and return characters (\r\n) The functions _blockIndentation(block)_ and _unindentation(blockString, numToUninent)_ works together to identify the indentation level and elimate these leading spaces of each line. And the result is a fhx string containing properly formatted block information of a particular property.

Finally, the function _classProperties(block)_ works on a DeltaV object (root block) and identities the header information (e.g. Description, Type, Scan Rate etc.) of a root block. This function is hard coded with the names of these properties.

TODO: Going forward, we need to be able to extract the desired information from each block, for example the value of a ATTRIBUTE*INSTANCE. And make the isolateBlock function more flexible, able to take an entire FHX and a path to drill down, instead of, currently, manually identify and extract the DV object block of interest before being called again to drill down further.
We also need a way to encapsulate these functions and fhx format data, to make \_classProperties(block)* more flexible

## 12/16/2024

After some renaming, findBlocks(fhxstring, blockType) returns a list of fhx blocks of a particular block Type. identifyBlock(block, name, blocks) isolates the block associated with the name in the input arguments.
TODO: create logic to extract information of each block. 1. From the definition line; 2. From the body enclosed by the bracket; 3. Taking into account of different format of the variables.

## 01/08/2025 (**Copilot autogenerated**)

1. **List of Functions:**

   - `classProperties(block)`: Extracts header properties of a control module class block.
   - `findBlocks(fhxstring, blockType)`: Finds all blocks of a given type in the FHX string.
   - `identifyBlock(blockType, name, blocks)`: Identifies a block with a specific name from a list of blocks.
   - `extractValueFrom(block, keyname)`: Extracts the value of a specific key from a block.

2. **Helper Functions:**

   - `unindentation(blockString, numToUninent)`: Unindents a block string by a specified number of spaces.
   - `blockIndentation(block)`: Finds the number of leading spaces of a block.
   - `tempWrite(input, filename, clear)`: Writes a string to a text file for testing and review.
   - `writeCsv(header, records, filepath, filename)`: Writes a CSV file based on the input header and records.
   - `findParameterList(data, blockType, keys)`: Finds a list of parameters in a block and extracts their values.
   - `fhxReplacer(input, replacer)`: Replaces FHX terms with display terms in a string.
   - `fhxObject(fhxstring, type, name)`: Finds a specific FHX object by type and name.
   - `valuesOfModuleParameters(module_data)`: Extracts default values of module parameters.
   - `valueOf(fhxBlock, key)`: Extracts the value of a specific key from a block.
   - `nameOf(fhxBlock)`: Extracts the name of a block.

3. **Other Edits:**
   - Updated `runner1(fhx_data)` to use the new functions for extracting module parameters and writing them to a CSV file.
   - Added comments and documentation for new functions.

### Notes:

- The new functions improve the modularity and readability of the code.
- The `findBlocks` function now supports inner blocks and handles depth changes correctly.
- The `writeCsv` function simplifies the process of writing CSV files from extracted data.
- The `fhxReplacer` function can be extended with additional replacer terms as needed.

## 01/10/2025

### Summary of `FileIO.js`:

The `FileIO.js` file contains utility functions for file operations, including:

- `prepareFilePath(filepath, filename, replace)`: Prepares the directory and file path for writing.
- `writeTxtFile(data, filepath, filename, replace)`: Writes data to a text file at the specified path.
- `writeTxtFiles(files, filepath, replace)`: Writes multiple text files to the specified directory.
- `writeTxtFileConcat(data, filepath, filename, replace)`: Writes a single text file with concatenated data.
- `writeTxtFileWithPrefix(data, filepath, baseFilename)`: Writes multiple text files with an auto-increment prefix.

### Summary of `obtainModuleParameters`:

The `obtainModuleProperties` function in `main.js`:

- Extracts the properties of a fhx block header.
- Creates a CSV file with the extracted properties.

### Tested logic with the `runner` function

- Finds and processes blocks of type "MODULE_CLASS" where the module is within a specific category (Equipment Module Classes).
